<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración - ComercioTech</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/comerciotech-theme.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin-dashboard.css') }}">
</head>
<body>
    <!-- Header del Dashboard -->
    <header class="admin-header">
        <div class="container">
            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb" class="breadcrumb-admin">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="{{ url_for('index') }}">
                            <i class="fas fa-home"></i> Tienda
                        </a>
                    </li>
                    <li class="breadcrumb-item active">Panel de Administración</li>
                </ol>
            </nav>

            <!-- Título -->
            <h1 class="admin-title">
                <i class="fas fa-tachometer-alt me-3"></i>
                Panel de Administración
            </h1>
            <p class="admin-subtitle">
                Gestiona y controla todos los aspectos de tu e-commerce desde una interfaz centralizada.
            </p>

            <!-- Estadísticas -->
            <div class="stat-grid">
                <div class="stat-card">
                    <i class="fas fa-shopping-cart stat-icon"></i>
                    <div class="stat-number" id="totalPedidos">0</div>
                    <div class="stat-label">Pedidos Hoy</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-dollar-sign stat-icon"></i>
                    <div class="stat-number" id="ventasHoy">$0</div>
                    <div class="stat-label">Ventas Hoy</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-users stat-icon"></i>
                    <div class="stat-number" id="usuariosActivos">0</div>
                    <div class="stat-label">Usuarios Activos</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-box stat-icon"></i>
                    <div class="stat-number" id="productosStock">0</div>
                    <div class="stat-label">Productos en Stock</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Contenido Principal -->
    <main class="dashboard-grid">
        <div class="container">
            <div class="row">
                <!-- Gestión de Pedidos -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="dashboard-card">
                        <div class="card-header-custom">
                            <div class="card-icon icon-pedidos">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <h3 class="card-title-custom">Gestión de Pedidos</h3>
                            <p class="card-description">
                                Administra, revisa y actualiza el estado de todos los pedidos de tus clientes.
                            </p>
                        </div>
                        <div class="card-footer-custom">
                            <a href="{{ url_for('admin_pedidos') }}" class="admin-btn">
                                <i class="fas fa-arrow-right"></i>
                                Ver Pedidos
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Gestión de Productos -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="dashboard-card">
                        <div class="card-header-custom">
                            <div class="card-icon icon-productos">
                                <i class="fas fa-box"></i>
                            </div>
                            <h3 class="card-title-custom">Gestión de Productos</h3>
                            <p class="card-description">
                                Crea, edita, elimina y organiza tu catálogo de productos.
                            </p>
                        </div>
                        <div class="card-footer-custom">
                            <a href="{{ url_for('admin_productos') }}" class="admin-btn">
                                <i class="fas fa-arrow-right"></i>
                                Gestionar Productos
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Gestión de Usuarios -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="dashboard-card">
                        <div class="card-header-custom">
                            <div class="card-icon icon-usuarios">
                                <i class="fas fa-users"></i>
                            </div>
                            <h3 class="card-title-custom">Gestión de Usuarios</h3>
                            <p class="card-description">
                                Administra cuentas de usuarios y permisos.
                            </p>
                        </div>
                        <div class="card-footer-custom">
                            <a href="#" class="admin-btn admin-btn-warning">
                                <i class="fas fa-arrow-right"></i>
                                Próximamente
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Reportes -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="dashboard-card">
                        <div class="card-header-custom">
                            <div class="card-icon icon-reportes">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <h3 class="card-title-custom">Reportes</h3>
                            <p class="card-description">
                                Visualiza estadísticas y métricas de rendimiento.
                            </p>
                        </div>
                        <div class="card-footer-custom">
                            <a href="#" class="admin-btn admin-btn-secondary">
                                <i class="fas fa-arrow-right"></i>
                                Ver Estadísticas
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Configuración -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="dashboard-card">
                        <div class="card-header-custom">
                            <div class="card-icon icon-configuracion">
                                <i class="fas fa-cogs"></i>
                            </div>
                            <h3 class="card-title-custom">Configuración</h3>
                            <p class="card-description">
                                Personaliza configuraciones del sistema.
                            </p>
                        </div>
                        <div class="card-footer-custom">
                            <a href="#" class="admin-btn admin-btn-secondary">
                                <i class="fas fa-arrow-right"></i>
                                Configurar
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Cerrar Sesión -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="dashboard-card">
                        <div class="card-header-custom">
                            <div class="card-icon icon-salir">
                                <i class="fas fa-sign-out-alt"></i>
                            </div>
                            <h3 class="card-title-custom">Cerrar Sesión</h3>
                            <p class="card-description">
                                Sal de forma segura del panel de administración.
                            </p>
                        </div>
                        <div class="card-footer-custom">
                            <a href="{{ url_for('logout') }}" class="admin-btn admin-btn-danger" onclick="return confirm('¿Estás seguro de que deseas cerrar sesión?')">
                                <i class="fas fa-arrow-right"></i>
                                Cerrar Sesión
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Datos de ejemplo para estadísticas
        const statsData = {
            pedidosHoy: 24,
            ventasHoy: 1250000,
            usuariosActivos: 156,
            productosStock: 89
        };

        // Animación de contador
        function animateCounter(element, target, duration = 2000) {
            const start = 0;
            const startTime = performance.now();
            
            function updateCounter(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                const current = Math.floor(progress * target);
                
                if (typeof target === 'number' && target > 1000) {
                    element.textContent = formatNumber(current);
                } else {
                    element.textContent = current;
                }
                
                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                }
            }
            
            requestAnimationFrame(updateCounter);
        }

        // Formatear números
        function formatNumber(num) {
            if (num >= 1000000) {
                return '$' + (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return '$' + (num / 1000).toFixed(0) + 'K';
            } else {
                return num.toString();
            }
        }

        // Cargar estadísticas
        function loadStats() {
            setTimeout(() => {
                animateCounter(document.getElementById('totalPedidos'), statsData.pedidosHoy);
                
                // Para ventas, formatear como dinero
                const ventasElement = document.getElementById('ventasHoy');
                let currentVentas = 0;
                const ventasInterval = setInterval(() => {
                    currentVentas += statsData.ventasHoy / 50;
                    if (currentVentas >= statsData.ventasHoy) {
                        currentVentas = statsData.ventasHoy;
                        clearInterval(ventasInterval);
                    }
                    ventasElement.textContent = '$' + Math.floor(currentVentas).toLocaleString('es-CL');
                }, 40);
                
                animateCounter(document.getElementById('usuariosActivos'), statsData.usuariosActivos);
                animateCounter(document.getElementById('productosStock'), statsData.productosStock);
            }, 500);
        }

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            loadStats();
            
            // Mostrar mensaje de bienvenida
            setTimeout(() => {
                console.log('Dashboard cargado correctamente');
            }, 1000);
        });

        // Atajos de teclado
        document.addEventListener('keydown', function(e) {
            // Ctrl + P para ir a pedidos
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                window.location.href = "{{ url_for('admin_pedidos') }}";
            }
            
            // Ctrl + I para ir a productos
            if (e.ctrlKey && e.key === 'i') {
                e.preventDefault();
                window.location.href = "{{ url_for('admin_productos') }}";
            }
            
            // Escape para volver al inicio
            if (e.key === 'Escape') {
                window.location.href = "{{ url_for('index') }}";
            }
        });
    </script>
</body>
</html>